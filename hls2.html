<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>YouTube-Style Video Player</title>

<style>

/* ===========================

DESIGN TOKENS (CSS Variables)

=========================== */

:root {

/* Base colors - HSL format */

--base-hue: 220;

--base-saturation: 15%;

--base-lightness: 15%;


/* Glassmorphism controls */

--control-bg: hsl(0, 0%, 95%, 0.15);

--control-bg-hover: hsl(0, 0%, 95%, 0.25);

--control-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);

--bubble-radius: 8px;

--bubble-padding: 8px 12px;


/* Accent colors */

--accent-primary: hsl(0, 100%, 50%);

--accent-hover: hsl(0, 100%, 60%);

--text-primary: hsl(0, 0%, 100%);

--text-secondary: hsl(0, 0%, 85%);


/* Progress bar */

--progress-bg: hsl(0, 0%, 100%, 0.3);

--progress-buffered: hsl(0, 0%, 100%, 0.5);

--progress-played: var(--accent-primary);


/* Animations */

--transition-smooth: 0.2s cubic-bezier(0.4, 0, 0.2, 1);

--transition-fade: 0.3s ease-in-out;

}

/* ===========================

RESET & BASE STYLES

=========================== */

* {

margin: 0;

padding: 0;

box-sizing: border-box;

}

body {

font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;

background: #000;

color: var(--text-primary);

overflow: hidden;

display: flex;

align-items: center;

justify-content: center;

height: 100vh;

width: 100vw;

}

/* ===========================

PLAYER CONTAINER

=========================== */

.player-container {

position: relative;

width: 100%;

max-width: 1280px;

aspect-ratio: 16 / 9;

background: #000;

overflow: hidden;

border-radius: 0;

}

@media (max-width: 1280px) {

.player-container {

max-width: 100%;

border-radius: 0;

}

}

/* ===========================

VIDEO ELEMENT

=========================== */

.video-element {

width: 100%;

height: 100%;

display: block;

background: #000;

}

/* ===========================

CONTROLS OVERLAY

=========================== */

.controls-overlay {

position: absolute;

bottom: 0;

left: 0;

right: 0;

padding: 0 16px 12px;

background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, transparent 100%);

opacity: 0;

transition: opacity var(--transition-fade);

z-index: 10;

}

.player-container:hover .controls-overlay,

.player-container.show-controls .controls-overlay,

.player-container.paused .controls-overlay {

opacity: 1;

}

/* ===========================

PROGRESS BAR

=========================== */

.progress-container {

position: relative;

width: 100%;

height: 5px;

background: var(--progress-bg);

cursor: pointer;

margin-bottom: 8px;

border-radius: 2px;

transition: height var(--transition-smooth);

}

.progress-container:hover {

height: 8px;

}

.progress-buffered {

position: absolute;

height: 100%;

background: var(--progress-buffered);

border-radius: 2px;

pointer-events: none;

}

.progress-played {

position: absolute;

height: 100%;

background: var(--progress-played);

border-radius: 2px;

pointer-events: none;

display: flex;

align-items: center;

justify-content: flex-end;

}

.progress-handle {

width: 14px;

height: 14px;

background: var(--accent-primary);

border-radius: 50%;

opacity: 0;

transition: opacity var(--transition-smooth);

box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);

}

.progress-container:hover .progress-handle {

opacity: 1;

}

/* Time tooltip on progress bar */

.time-tooltip {

position: absolute;

bottom: 12px;

padding: 4px 8px;

background: rgba(0, 0, 0, 0.9);

color: white;

font-size: 12px;

border-radius: 4px;

pointer-events: none;

opacity: 0;

transform: translateX(-50%);

white-space: nowrap;

}

.progress-container:hover .time-tooltip {

opacity: 1;

}

/* ===========================

CONTROLS BAR

=========================== */

.controls-bar {

display: flex;

align-items: center;

justify-content: space-between;

gap: 8px;

}

.controls-left,

.controls-right {

display: flex;

align-items: center;

gap: 8px;

}

/* ===========================

CONTROL BUTTONS (BUBBLES)

=========================== */

.control-btn {

background: var(--control-bg);

border: none;

color: var(--text-primary);

padding: var(--bubble-padding);

border-radius: var(--bubble-radius);

cursor: pointer;

transition: all var(--transition-smooth);

backdrop-filter: blur(10px);

-webkit-backdrop-filter: blur(10px);

box-shadow: var(--control-shadow);

display: flex;

align-items: center;

gap: 6px;

font-size: 14px;

font-weight: 500;

min-width: 40px;

min-height: 40px;

justify-content: center;

}

.control-btn:hover {

background: var(--control-bg-hover);

transform: scale(1.05);

}

.control-btn:active {

transform: scale(0.98);

}

.control-btn.active {

background: var(--control-bg-hover);

}

.control-btn svg {

width: 20px;

height: 20px;

fill: currentColor;

}

.control-btn:disabled {

opacity: 0.4;

cursor: not-allowed;

}

/* ===========================

VOLUME CONTROL

=========================== */

.volume-container {

position: relative;

display: flex;

align-items: center;

gap: 8px;

}

.volume-slider {

width: 0;

opacity: 0;

transition: width var(--transition-smooth), opacity var(--transition-smooth);

height: 4px;

background: var(--progress-bg);

border-radius: 2px;

cursor: pointer;

overflow: hidden;

}

.volume-container:hover .volume-slider {

width: 60px;

opacity: 1;

}

.volume-progress {

height: 100%;

background: var(--text-primary);

pointer-events: none;

}

/* ===========================

TIME DISPLAY

=========================== */

.time-display {

background: var(--control-bg);

padding: var(--bubble-padding);

border-radius: var(--bubble-radius);

backdrop-filter: blur(10px);

-webkit-backdrop-filter: blur(10px);

box-shadow: var(--control-shadow);

font-size: 13px;

color: var(--text-secondary);

white-space: nowrap;

min-height: 40px;

display: flex;

align-items: center;

}

/* ===========================

SETTINGS MENU

=========================== */

.settings-menu {

position: absolute;

bottom: 60px;

right: 16px;

background: rgba(28, 28, 28, 0.95);

backdrop-filter: blur(20px);

-webkit-backdrop-filter: blur(20px);

border-radius: 8px;

padding: 8px 0;

min-width: 200px;

box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);

opacity: 0;

pointer-events: none;

transform: translateY(10px);

transition: all var(--transition-smooth);

z-index: 20;

}

.settings-menu.active {

opacity: 1;

pointer-events: all;

transform: translateY(0);

}

.menu-item {

padding: 10px 16px;

cursor: pointer;

transition: background var(--transition-smooth);

display: flex;

align-items: center;

justify-content: space-between;

font-size: 14px;

}

.menu-item:hover {

background: rgba(255, 255, 255, 0.1);

}

.menu-item.active {

color: var(--accent-primary);

}

.menu-item svg {

width: 16px;

height: 16px;

fill: currentColor;

}

/* ===========================

CENTER CONTROLS CONTAINER

=========================== */

.center-controls {

position: absolute;

top: 50%;

left: 50%;

transform: translate(-50%, -50%);

display: flex;

align-items: center;

gap: 40px;

opacity: 0;

transition: all var(--transition-fade);

z-index: 5;

}

.player-container:hover .center-controls,

.player-container.paused .center-controls {

opacity: 1;

}

.player-container.playing .center-controls {

opacity: 0;

}

/* ===========================

CENTER PLAY BUTTON

=========================== */

.center-play-btn {

width: 80px;

height: 80px;

background: var(--control-bg);

backdrop-filter: blur(10px);

-webkit-backdrop-filter: blur(10px);

border: none;

border-radius: 50%;

cursor: pointer;

display: flex;

align-items: center;

justify-content: center;

transition: all var(--transition-smooth);

box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);

}

.center-play-btn:hover {

background: var(--control-bg-hover);

transform: scale(1.1);

}

.center-play-btn svg {

width: 40px;

height: 40px;

fill: var(--text-primary);

}

/* ===========================

CENTER SKIP BUTTONS (NO GLASS EFFECT)

=========================== */

.center-skip-btn {

width: 60px;

height: 60px;

background: rgba(0, 0, 0, 0.6);

border: 2px solid rgba(255, 255, 255, 0.3);

border-radius: 50%;

cursor: pointer;

display: flex;

align-items: center;

justify-content: center;

transition: all var(--transition-smooth);

box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);

}

.center-skip-btn:hover {

background: rgba(0, 0, 0, 0.8);

border-color: rgba(255, 255, 255, 0.6);

transform: scale(1.1);

}

.center-skip-btn:active {

transform: scale(0.95);

}

.center-skip-btn svg {

width: 32px;

height: 32px;

fill: var(--text-primary);

}

/* ===========================

LOADING SPINNER

=========================== */

.loading-spinner {

position: absolute;

top: 50%;

left: 50%;

transform: translate(-50%, -50%);

width: 60px;

height: 60px;

border: 4px solid rgba(255, 255, 255, 0.2);

border-top-color: var(--accent-primary);

border-radius: 50%;

animation: spin 1s linear infinite;

opacity: 0;

pointer-events: none;

z-index: 15;

}

.loading-spinner.active {

opacity: 1;

}

@keyframes spin {

to { transform: translate(-50%, -50%) rotate(360deg); }

}

/* ===========================

RESPONSIVE

=========================== */

@media (max-width: 768px) {

.controls-overlay {

padding: 0 8px 8px;

}

.control-btn {

padding: 6px 10px;

min-width: 36px;

min-height: 36px;

}

.control-btn svg {

width: 18px;

height: 18px;

}

.time-display {

font-size: 11px;

padding: 6px 10px;

}

.controls-bar {

gap: 4px;

}

.controls-left,

.controls-right {

gap: 4px;

}


.settings-menu {

right: 8px;

}

.center-controls {

gap: 30px;

}

.center-play-btn {

width: 70px;

height: 70px;

}

.center-skip-btn {

width: 50px;

height: 50px;

}

.center-skip-btn svg {

width: 28px;

height: 28px;

}

}

/* ===========================

ACCESSIBILITY

=========================== */

.control-btn:focus,

.progress-container:focus,

.center-play-btn:focus,

.center-skip-btn:focus {

outline: 2px solid var(--accent-primary);

outline-offset: 2px;

}

/* Hide default video controls */

video::-webkit-media-controls {

display: none !important;

}

video::-webkit-media-controls-enclosure {

display: none !important;

}

</style>

</head>

<body>

<div class="player-container paused" id="playerContainer">

<video class="video-element" id="videoElement" playsinline preload="metadata"></video>


<!-- Loading Spinner -->

<div class="loading-spinner" id="loadingSpinner"></div>

<!-- Center Controls with Skip Buttons -->

<div class="center-controls" id="centerControls">

<!-- Backward 10s Button (Left) -->

<button class="center-skip-btn" id="centerBackwardBtn" aria-label="Rewind 10 seconds">

<svg viewBox="0 0 24 24">

<path d="M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>

<text x="12" y="16" text-anchor="middle" font-size="8" fill="currentColor" font-weight="bold">10</text>

</svg>

</button>

<!-- Center Play Button -->

<button class="center-play-btn" id="centerPlayBtn" aria-label="Play">

<svg viewBox="0 0 24 24">

<path d="M8 5v14l11-7z"/>

</svg>

</button>

<!-- Forward 10s Button (Right) -->

<button class="center-skip-btn" id="centerForwardBtn" aria-label="Forward 10 seconds">

<svg viewBox="0 0 24 24">

<path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/>

<text x="12" y="16" text-anchor="middle" font-size="8" fill="currentColor" font-weight="bold">10</text>

</svg>

</button>

</div>

<!-- Controls Overlay -->

<div class="controls-overlay" id="controlsOverlay">

<!-- Progress Bar -->

<div class="progress-container" id="progressContainer" role="slider" aria-label="Seek" tabindex="0">

<div class="progress-buffered" id="progressBuffered"></div>

<div class="progress-played" id="progressPlayed">

<div class="progress-handle"></div>

</div>

<div class="time-tooltip" id="timeTooltip">0:00</div>

</div>

<!-- Controls Bar -->

<div class="controls-bar">

<!-- Left Controls -->

<div class="controls-left">

<button class="control-btn" id="playPauseBtn" aria-label="Play">

<svg id="playIcon" viewBox="0 0 24 24">

<path d="M8 5v14l11-7z"/>

</svg>

<svg id="pauseIcon" viewBox="0 0 24 24" style="display: none;">

<path d="M6 4h4v16H6zm8 0h4v16h-4z"/>

</svg>

</button>

<button class="control-btn" id="prevBtn" aria-label="Previous" disabled>

<svg viewBox="0 0 24 24">

<path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>

</svg>

</button>

<button class="control-btn" id="nextBtn" aria-label="Next" disabled>

<svg viewBox="0 0 24 24">

<path d="M16 18h2V6h-2zM6 18l8.5-6L6 6z"/>

</svg>

</button>

<!-- Volume Control -->

<div class="volume-container">

<button class="control-btn" id="volumeBtn" aria-label="Mute">

<svg id="volumeIcon" viewBox="0 0 24 24">

<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>

</svg>

<svg id="muteIcon" viewBox="0 0 24 24" style="display: none;">

<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>

</svg>

</button>

<div class="volume-slider" id="volumeSlider">

<div class="volume-progress" id="volumeProgress"></div>

</div>

</div>

<div class="time-display" id="timeDisplay">0:00 / 0:00</div>

</div>

<!-- Right Controls -->

<div class="controls-right">

<button class="control-btn" id="ccBtn" aria-label="Closed captions" title="Subtitles/CC">

<svg viewBox="0 0 24 24">

<path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"/>

</svg>

</button>

<button class="control-btn" id="settingsBtn" aria-label="Settings" title="Settings">

<svg viewBox="0 0 24 24">

<path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>

</svg>

</button>

<button class="control-btn" id="pipBtn" aria-label="Picture-in-picture" title="Miniplayer">

<svg viewBox="0 0 24 24">

<path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"/>

</svg>

</button>

<button class="control-btn" id="fullscreenBtn" aria-label="Fullscreen" title="Fullscreen">

<svg id="fullscreenIcon" viewBox="0 0 24 24">

<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>

</svg>

<svg id="fullscreenExitIcon" viewBox="0 0 24 24" style="display: none;">

<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>

</svg>

</button>

</div>

</div>

</div>

<!-- Settings Menu -->

<div class="settings-menu" id="settingsMenu">

<div class="menu-item" data-menu="speed">

<span>Playback speed</span>

<span id="currentSpeed">Normal</span>

</div>

<div class="menu-item" data-menu="quality">

<span>Quality</span>

<span id="currentQuality">Auto</span>

</div>

</div>

<!-- Speed Menu -->

<div class="settings-menu" id="speedMenu" style="display: none;">

<div class="menu-item" data-speed="0.25">0.25x</div>

<div class="menu-item" data-speed="0.5">0.5x</div>

<div class="menu-item" data-speed="0.75">0.75x</div>

<div class="menu-item active" data-speed="1">Normal</div>

<div class="menu-item" data-speed="1.25">1.25x</div>

<div class="menu-item" data-speed="1.5">1.5x</div>

<div class="menu-item" data-speed="1.75">1.75x</div>

<div class="menu-item" data-speed="2">2x</div>

</div>

<!-- Quality Menu -->

<div class="settings-menu" id="qualityMenu" style="display: none;">

<div class="menu-item active" data-quality="-1">Auto</div>

<!-- Quality options will be populated dynamically -->

</div>

</div>

<!-- HLS.js Library -->

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>

/* ===========================

CONFIGURATION

Replace these URLs with your own media sources

=========================== */


// MEDIA_URL: Provide your HLS stream (.m3u8) or direct video URL (MP4, WebM)

const MEDIA_URL = "https://fsl.anime4u.co/War.2.2025.1080p.Hindi.DS4K.WEB-DL.5.1.ESub.x264-HDHub4u.Ms.mkv?token=1761832506";


// SUBTITLE_URL: Optional WebVTT subtitle file URL

const SUBTITLE_URL = "";

/* ===========================

PLAYER INITIALIZATION

=========================== */

const videoElement = document.getElementById('videoElement');

const playerContainer = document.getElementById('playerContainer');

const controlsOverlay = document.getElementById('controlsOverlay');

const loadingSpinner = document.getElementById('loadingSpinner');


// Control buttons

const playPauseBtn = document.getElementById('playPauseBtn');

const centerPlayBtn = document.getElementById('centerPlayBtn');

const centerBackwardBtn = document.getElementById('centerBackwardBtn');

const centerForwardBtn = document.getElementById('centerForwardBtn');

const playIcon = document.getElementById('playIcon');

const pauseIcon = document.getElementById('pauseIcon');

const prevBtn = document.getElementById('prevBtn');

const nextBtn = document.getElementById('nextBtn');

const volumeBtn = document.getElementById('volumeBtn');

const volumeIcon = document.getElementById('volumeIcon');

const muteIcon = document.getElementById('muteIcon');

const ccBtn = document.getElementById('ccBtn');

const settingsBtn = document.getElementById('settingsBtn');

const pipBtn = document.getElementById('pipBtn');

const fullscreenBtn = document.getElementById('fullscreenBtn');

const fullscreenIcon = document.getElementById('fullscreenIcon');

const fullscreenExitIcon = document.getElementById('fullscreenExitIcon');

// Progress and volume

const progressContainer = document.getElementById('progressContainer');

const progressBuffered = document.getElementById('progressBuffered');

const progressPlayed = document.getElementById('progressPlayed');

const timeTooltip = document.getElementById('timeTooltip');

const timeDisplay = document.getElementById('timeDisplay');

const volumeSlider = document.getElementById('volumeSlider');

const volumeProgress = document.getElementById('volumeProgress');

// Menus

const settingsMenu = document.getElementById('settingsMenu');

const speedMenu = document.getElementById('speedMenu');

const qualityMenu = document.getElementById('qualityMenu');

// State

let hls = null;

let controlsTimeout = null;

let isFullscreen = false;

let lastVolume = 1;

/* ===========================

MEDIA LOADING

=========================== */

function loadMedia() {

if (!MEDIA_URL) {

console.error('MEDIA_URL is not set. Please provide a valid HLS (.m3u8) or direct video URL.');

alert('MEDIA_URL is not configured. Please edit the HTML file and set the MEDIA_URL constant at the top of the JavaScript section.');

return;

}

loadingSpinner.classList.add('active');

// Check if HLS is supported

if (MEDIA_URL.includes('.m3u8')) {

if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {

// Native HLS support (Safari)

videoElement.src = MEDIA_URL;

loadingSpinner.classList.remove('active');

} else if (Hls.isSupported()) {

// Use HLS.js with optimized buffering

hls = new Hls({

enableWorker: true,

lowLatencyMode: false,

maxBufferLength: 30,

maxMaxBufferLength: 60,

maxBufferSize: 60 * 1000 * 1000,

maxBufferHole: 0.5,

highBufferWatchdogPeriod: 2,

backBufferLength: 90,

});

hls.loadSource(MEDIA_URL);

hls.attachMedia(videoElement);


hls.on(Hls.Events.MANIFEST_PARSED, function() {

loadingSpinner.classList.remove('active');

populateQualityMenu();

});

hls.on(Hls.Events.ERROR, function(event, data) {

console.error('HLS Error:', data);

if (data.fatal) {

loadingSpinner.classList.remove('active');

switch(data.type) {

case Hls.ErrorTypes.NETWORK_ERROR:

alert('Network error loading video. Please check the MEDIA_URL.');

break;

case Hls.ErrorTypes.MEDIA_ERROR:

console.log('Trying to recover from media error...');

hls.recoverMediaError();

break;

default:

alert('Fatal error loading video.');

break;

}

}

});

} else {

console.error('HLS is not supported in this browser.');

loadingSpinner.classList.remove('active');

alert('HLS streaming is not supported in this browser. Please use a modern browser or provide a direct MP4 URL.');

}

} else {

// Direct video URL (MP4, WebM, etc.)

videoElement.src = MEDIA_URL;

loadingSpinner.classList.remove('active');

}

// Load subtitles if provided

if (SUBTITLE_URL) {

const track = document.createElement('track');

track.kind = 'subtitles';

track.label = 'English';

track.srclang = 'en';

track.src = SUBTITLE_URL;

track.default = true;

videoElement.appendChild(track);

ccBtn.classList.add('active');

}

}

/* ===========================

QUALITY MENU POPULATION

=========================== */

function populateQualityMenu() {

if (!hls || !hls.levels.length) return;

qualityMenu.innerHTML = '<div class="menu-item active" data-quality="-1">Auto</div>';


hls.levels.forEach((level, index) => {

const menuItem = document.createElement('div');

menuItem.className = 'menu-item';

menuItem.dataset.quality = index;

menuItem.textContent = `${level.height}p`;

qualityMenu.appendChild(menuItem);

});

// Add click handlers

qualityMenu.querySelectorAll('.menu-item').forEach(item => {

item.addEventListener('click', function() {

const quality = parseInt(this.dataset.quality);

hls.currentLevel = quality;


qualityMenu.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));

this.classList.add('active');


document.getElementById('currentQuality').textContent = this.textContent;

hideAllMenus();

});

});

}

/* ===========================

PLAY/PAUSE

=========================== */

function togglePlayPause() {

if (videoElement.paused) {

videoElement.play();

} else {

videoElement.pause();

}

}

playPauseBtn.addEventListener('click', togglePlayPause);

centerPlayBtn.addEventListener('click', togglePlayPause);

videoElement.addEventListener('click', togglePlayPause);

videoElement.addEventListener('play', function() {

playerContainer.classList.remove('paused');

playerContainer.classList.add('playing');

playIcon.style.display = 'none';

pauseIcon.style.display = 'block';

});

videoElement.addEventListener('pause', function() {

playerContainer.classList.add('paused');

playerContainer.classList.remove('playing');

playIcon.style.display = 'block';

pauseIcon.style.display = 'none';

});

/* ===========================

CENTER SKIP BUTTONS

=========================== */

centerBackwardBtn.addEventListener('click', function(e) {

e.stopPropagation();

videoElement.currentTime = Math.max(0, videoElement.currentTime - 10);

showControls();

});

centerForwardBtn.addEventListener('click', function(e) {

e.stopPropagation();

videoElement.currentTime = Math.min(videoElement.duration, videoElement.currentTime + 10);

showControls();

});

/* ===========================

PROGRESS BAR

=========================== */

videoElement.addEventListener('timeupdate', function() {

const percent = (videoElement.currentTime / videoElement.duration) * 100;

progressPlayed.style.width = percent + '%';

updateTimeDisplay();

});

videoElement.addEventListener('progress', function() {

if (videoElement.buffered.length > 0) {

const bufferedEnd = videoElement.buffered.end(videoElement.buffered.length - 1);

const percent = (bufferedEnd / videoElement.duration) * 100;

progressBuffered.style.width = percent + '%';

}

});

progressContainer.addEventListener('click', function(e) {

const rect = this.getBoundingClientRect();

const percent = (e.clientX - rect.left) / rect.width;

videoElement.currentTime = percent * videoElement.duration;

});

progressContainer.addEventListener('mousemove', function(e) {

const rect = this.getBoundingClientRect();

const percent = (e.clientX - rect.left) / rect.width;

const time = percent * videoElement.duration;

timeTooltip.textContent = formatTime(time);

timeTooltip.style.left = (e.clientX - rect.left) + 'px';

});

/* ===========================

TIME DISPLAY

=========================== */

function updateTimeDisplay() {

const current = formatTime(videoElement.currentTime);

const duration = formatTime(videoElement.duration);

timeDisplay.textContent = `${current} / ${duration}`;

}

function formatTime(seconds) {

if (isNaN(seconds)) return '0:00';

const mins = Math.floor(seconds / 60);

const secs = Math.floor(seconds % 60);

return `${mins}:${secs.toString().padStart(2, '0')}`;

}

/* ===========================

VOLUME CONTROL

=========================== */

volumeBtn.addEventListener('click', function() {

if (videoElement.muted || videoElement.volume === 0) {

videoElement.muted = false;

videoElement.volume = lastVolume;

volumeIcon.style.display = 'block';

muteIcon.style.display = 'none';

} else {

lastVolume = videoElement.volume;

videoElement.muted = true;

volumeIcon.style.display = 'none';

muteIcon.style.display = 'block';

}

updateVolumeDisplay();

});

volumeSlider.addEventListener('click', function(e) {

const rect = this.getBoundingClientRect();

const percent = (e.clientX - rect.left) / rect.width;

videoElement.volume = Math.max(0, Math.min(1, percent));

videoElement.muted = false;

updateVolumeDisplay();

});

videoElement.addEventListener('volumechange', updateVolumeDisplay);

function updateVolumeDisplay() {

const volume = videoElement.muted ? 0 : videoElement.volume;

volumeProgress.style.width = (volume * 100) + '%';


if (volume === 0) {

volumeIcon.style.display = 'none';

muteIcon.style.display = 'block';

} else {

volumeIcon.style.display = 'block';

muteIcon.style.display = 'none';

}

}

/* ===========================

SETTINGS MENU

=========================== */

settingsBtn.addEventListener('click', function(e) {

e.stopPropagation();

settingsMenu.classList.toggle('active');

speedMenu.style.display = 'none';

qualityMenu.style.display = 'none';

});

settingsMenu.querySelectorAll('[data-menu]').forEach(item => {

item.addEventListener('click', function() {

const menuType = this.dataset.menu;

settingsMenu.classList.remove('active');


if (menuType === 'speed') {

speedMenu.style.display = 'block';

speedMenu.classList.add('active');

} else if (menuType === 'quality') {

qualityMenu.style.display = 'block';

qualityMenu.classList.add('active');

}

});

});

speedMenu.querySelectorAll('[data-speed]').forEach(item => {

item.addEventListener('click', function() {

const speed = parseFloat(this.dataset.speed);

videoElement.playbackRate = speed;


speedMenu.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));

this.classList.add('active');


document.getElementById('currentSpeed').textContent = this.textContent;

hideAllMenus();

});

});

function hideAllMenus() {

settingsMenu.classList.remove('active');

speedMenu.classList.remove('active');

speedMenu.style.display = 'none';

qualityMenu.classList.remove('active');

qualityMenu.style.display = 'none';

}

document.addEventListener('click', function(e) {

if (!e.target.closest('.settings-menu') && !e.target.closest('#settingsBtn')) {

hideAllMenus();

}

});

/* ===========================

CAPTIONS/SUBTITLES

=========================== */

ccBtn.addEventListener('click', function() {

const tracks = videoElement.textTracks;

if (tracks.length > 0) {

const track = tracks[0];

if (track.mode === 'showing') {

track.mode = 'hidden';

this.classList.remove('active');

} else {

track.mode = 'showing';

this.classList.add('active');

}

}

});

/* ===========================

PICTURE-IN-PICTURE

=========================== */

pipBtn.addEventListener('click', async function() {

try {

if (document.pictureInPictureElement) {

await document.exitPictureInPicture();

} else {

await videoElement.requestPictureInPicture();

}

} catch (error) {

console.error('PiP Error:', error);

}

});

videoElement.addEventListener('enterpictureinpicture', function() {

pipBtn.classList.add('active');

});

videoElement.addEventListener('leavepictureinpicture', function() {

pipBtn.classList.remove('active');

});

/* ===========================

FULLSCREEN

=========================== */

fullscreenBtn.addEventListener('click', toggleFullscreen);

function toggleFullscreen() {

if (!document.fullscreenElement) {

playerContainer.requestFullscreen().catch(err => {

console.error('Fullscreen Error:', err);

});

} else {

document.exitFullscreen();

}

}

document.addEventListener('fullscreenchange', function() {

isFullscreen = !!document.fullscreenElement;


if (isFullscreen) {

fullscreenIcon.style.display = 'none';

fullscreenExitIcon.style.display = 'block';

} else {

fullscreenIcon.style.display = 'block';

fullscreenExitIcon.style.display = 'none';

}

});

/* ===========================

KEYBOARD SHORTCUTS

=========================== */

document.addEventListener('keydown', function(e) {

if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

switch(e.key.toLowerCase()) {

case ' ':

case 'k':

e.preventDefault();

togglePlayPause();

showControls();

break;

case 'arrowleft':

case 'j':

e.preventDefault();

videoElement.currentTime = Math.max(0, videoElement.currentTime - 10);

showControls();

break;

case 'arrowright':

case 'l':

e.preventDefault();

videoElement.currentTime = Math.min(videoElement.duration, videoElement.currentTime + 10);

showControls();

break;

case 'arrowup':

e.preventDefault();

videoElement.volume = Math.min(1, videoElement.volume + 0.1);

showControls();

break;

case 'arrowdown':

e.preventDefault();

videoElement.volume = Math.max(0, videoElement.volume - 0.1);

showControls();

break;

case 'm':

e.preventDefault();

volumeBtn.click();

showControls();

break;

case 'f':

e.preventDefault();

toggleFullscreen();

break;

case 'c':

e.preventDefault();

ccBtn.click();

showControls();

break;

case 'i':

e.preventDefault();

pipBtn.click();

break;

}

});

/* ===========================

CONTROLS AUTO-HIDE

=========================== */

playerContainer.addEventListener('mousemove', function() {

showControls();

});

playerContainer.addEventListener('mouseleave', function() {

if (!videoElement.paused) {

hideControls();

}

});

function showControls() {

playerContainer.classList.add('show-controls');

clearTimeout(controlsTimeout);


if (!videoElement.paused) {

controlsTimeout = setTimeout(() => {

hideControls();

}, 2500);

}

}

function hideControls() {

if (!videoElement.paused && !settingsMenu.classList.contains('active')) {

playerContainer.classList.remove('show-controls');

}

}

/* ===========================

LOADING STATES

=========================== */

videoElement.addEventListener('waiting', function() {

loadingSpinner.classList.add('active');

});

videoElement.addEventListener('canplay', function() {

loadingSpinner.classList.remove('active');

});

videoElement.addEventListener('playing', function() {

loadingSpinner.classList.remove('active');

});

/* ===========================

INITIALIZATION

=========================== */

loadMedia();

updateVolumeDisplay();

showControls();

</script>

</body>

</html>